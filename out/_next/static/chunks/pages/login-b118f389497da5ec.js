(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(1237)}])},8062:function(e,t,n){"use strict";n.d(t,{II:function(){return s},Ph:function(){return i}});var r=n(5893);function s(e){let{id:t,type:n="text",placeholder:s="",defaultValue:i="",refEl:l,label:o,onChangeEvent:a,addlClass:c="",children:u}=e;return(0,r.jsxs)("div",{className:"field ".concat(c," text-2xl"),children:[o&&(0,r.jsx)("label",{className:"label",children:o}),(0,r.jsx)("div",{className:"control",children:(0,r.jsx)("input",{id:t,placeholder:s,className:"input",type:n,defaultValue:i,ref:l,onChange:a})}),u]})}function i(e){let{id:t,refEl:n,options:s,title:i,value:l,onChangeEvent:o,addlClass:a=""}=e;return(0,r.jsx)("div",{className:"text-2xl",children:(0,r.jsx)("div",{className:"control",children:(0,r.jsxs)("select",{id:t,ref:n,value:l,onChange:o,className:"input p-1.5",children:[(0,r.jsx)("option",{value:"0",children:i}),s.map(e=>(0,r.jsx)("option",{value:e.id,className:"",children:e.name},e.id))]})})})}n(7294)},6836:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),s=n(9008),i=n.n(s),l=n(3271);function o(e){let{children:t}=e;return(0,r.jsx)(l.O,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Drift Notes"})}),(0,r.jsx)("main",{children:t})]})})}},1641:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),s=n(1664),i=n.n(s),l=n(7294),o=n(3271),a=n(1163);function c(){let{token:e,setProfile:t}=(0,o.b)();(0,l.useRef)(null);let[n,s]=(0,l.useState)(!1),c=(0,a.useRouter)();return(0,l.useEffect)(()=>{e&&s(!0)},[e]),(0,r.jsxs)("nav",{className:"text-emerald-900 py-1 relative w-full",children:[(0,r.jsx)("div",{className:"m-3 container flex justify-between items-center px-1",children:(0,r.jsx)("h1",{className:"text-7xl bg-clip-text text-transparent bg-emerald-900 pt-5",children:"drift notes."})}),(0,r.jsx)("div",{children:n?(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(i(),{href:"/",className:"text-3xl text-black hover:text-emerald-600 transition duration-75 hover:underline ml-5 mr-6 ",children:"home"}),(0,r.jsx)(i(),{href:"/dashboard",className:"text-3xl text-black hover:text-emerald-600 transition duration-75 hover:underline",children:"dashboard"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>{t({id:0,username:"",first_name:"",last_name:"",email:""}),localStorage.removeItem("token"),s(!1),c.push("/login")},className:"mr-5 text-3xl text-black hover:text-red-500 transition duration-75 hover:underline",children:"log out"})})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(i(),{href:"/",className:"text-3xl text-black hover:text-emerald-600 transition duration-75 hover:underline ml-5 mr-6 ",children:"home"}),(0,r.jsx)(i(),{href:"/login",className:"text-3xl text-black hover:text-emerald-600 transition duration-75 hover:underline",children:"log in"})]})})]})}},3271:function(e,t,n){"use strict";n.d(t,{O:function(){return a},b:function(){return c}});var r=n(5893),s=n(7294),i=n(3409),l=n(1163);let o=(0,s.createContext)({profile:{id:0,username:"",first_name:"",last_name:"",email:""},token:"",setProfile:()=>{},setToken:()=>{}});function a(e){let{children:t}=e,[n,a]=(0,s.useState)({id:0,username:"",first_name:"",last_name:"",email:""}),[c,u]=(0,s.useState)("");return(0,l.useRouter)(),(0,s.useEffect)(()=>{u(localStorage.getItem("token")||"")},[]),(0,s.useEffect)(()=>{!c||(localStorage.setItem("token",c),"id"in n||(0,i.et)().then(e=>{e&&a(e)}))},[c]),(0,r.jsx)(o.Provider,{value:{profile:n,token:c,setToken:u,setProfile:a},children:t})}function c(){return(0,s.useContext)(o)}},3409:function(e,t,n){"use strict";n.d(t,{et:function(){return l},x4:function(){return s},z2:function(){return i}});var r=n(7136);function s(e){return(0,r.DI)("login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function i(e){return(0,r.DI)("register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function l(){let e=localStorage.getItem("token");return(0,r.DI)("profile",{headers:{Authorization:"Token ".concat(e)}})}},7136:function(e,t,n){"use strict";n.d(t,{DI:function(){return o},Gk:function(){return a}});let r="https://app.driftnotes.com",s=e=>{if(!e.ok){if(204===e.status)return;throw Error(e.status.toString())}return e},i=e=>{if(200===e.status||201===e.status)return e.json();throw Error(e.status.toString())},l=e=>{if("401"===e.message&&(window.location.href="/login"),"404"===e.message)throw Error(e.message);if("400"!==e.message)throw e},o=(e,t)=>fetch("".concat(r,"/").concat(e),t).then(i).catch(l),a=(e,t)=>fetch("".concat(r,"/").concat(e),t).then(s).catch(l)},1237:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(5893),s=n(1664),i=n.n(s),l=n(1163),o=n(7294),a=n(8062),c=n(6836),u=n(1641),d=n(3271),f=n(3409);function h(){let{setToken:e}=(0,d.b)(),t=(0,o.useRef)(null),n=(0,o.useRef)(null),s=(0,l.useRouter)();return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)("form",{className:"outline outline-orange-500 shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:r=>{var i,l;r.preventDefault();let o={username:(null===(i=t.current)||void 0===i?void 0:i.value)||"",password:(null===(l=n.current)||void 0===l?void 0:l.value)||""};(0,f.x4)(o).then(t=>{t.token&&(e(t.token),s.push("/dashboard"))})},children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-green-900",children:"welcome back!"}),(0,r.jsx)(a.II,{id:"username",refEl:t,type:"text",label:"username"}),(0,r.jsx)(a.II,{id:"password",refEl:n,type:"password",label:"password"}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("button",{className:"mt-5 outline outline-emerald-800 hover:bg-rose-100 text-orange-500 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"login"})}),(0,r.jsx)(i(),{href:"/register",children:(0,r.jsx)("button",{className:"mt-8 hover:underline text-black font-bold rounded focus:outline-none focus:shadow-outline",children:"register"})})]})})})}h.getLayout=function(e){return(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(u.Z,{}),e]})}}},function(e){e.O(0,[814,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);